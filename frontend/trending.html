<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tendances - ZeeXClub</title>
    <meta name="description" content="Les films et séries les plus populaires du moment">
    
    <link rel="icon" type="image/x-icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/trending.css">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <span class="logo-text">ZeeX</span><span class="logo-accent">Club</span>
            </a>
            
            <div class="nav-links" id="navLinks">
                <a href="index.html" class="nav-link">Accueil</a>
                <a href="catalog.html?type=movie" class="nav-link">Films</a>
                <a href="catalog.html?type=series" class="nav-link">Séries</a>
                <a href="catalog.html" class="nav-link">Catalogue</a>
                <a href="mylist.html" class="nav-link">Ma Liste</a>
            </div>
            
            <div class="nav-actions">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Rechercher...">
                    <button id="searchBtn"><i class="fas fa-search"></i></button>
                </div>
                <a href="profile.html" class="profile-btn">
                    <i class="fas fa-user"></i>
                </a>
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Header -->
    <header class="catalog-header" style="padding-top: 100px;">
        <div class="catalog-header-content">
            <h1 class="catalog-title"><i class="fas fa-fire" style="color: #ff6b6b;"></i> Tendances</h1>
            <p style="color: var(--text-secondary); margin-top: 10px;">
                Les films et séries les plus regardés cette semaine
            </p>
            
            <div class="catalog-filters" style="margin-top: 20px;">
                <a href="trending.html?type=all" class="filter-btn active">Tous</a>
                <a href="trending.html?type=movie" class="filter-btn">Films</a>
                <a href="trending.html?type=series" class="filter-btn">Séries</a>
            </div>
        </div>
    </header>

    <!-- Top 10 Section -->
    <section class="content-section" style="padding: 0 4% 40px;">
        <h2 class="section-title" style="margin-bottom: 25px;">Top 10 aujourd'hui</h2>
        <div class="top-ten-grid" id="topTenGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px;">
            <!-- Injecté par JS -->
            <div class="skeleton" style="aspect-ratio: 2/3; border-radius: 8px;"></div>
            <div class="skeleton" style="aspect-ratio: 2/3; border-radius: 8px;"></div>
            <div class="skeleton" style="aspect-ratio: 2/3; border-radius: 8px;"></div>
            <div class="skeleton" style="aspect-ratio: 2/3; border-radius: 8px;"></div>
            <div class="skeleton" style="aspect-ratio: 2/3; border-radius: 8px;"></div>
        </div>
    </section>

    <!-- Toutes les tendances -->
    <section class="content-section">
        <h2 class="section-title" style="margin-bottom: 25px; padding: 0 4%;">Populaires</h2>
        <div class="catalog-grid" id="trendingGrid" style="padding: 0 4%;">
            <div class="skeleton" style="aspect-ratio: 2/3;"></div>
            <div class="skeleton" style="aspect-ratio: 2/3;"></div>
            <div class="skeleton" style="aspect-ratio: 2/3;"></div>
            <div class="skeleton" style="aspect-ratio: 2/3;"></div>
            <div class="skeleton" style="aspect-ratio: 2/3;"></div>
            <div class="skeleton" style="aspect-ratio: 2/3;"></div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3 class="footer-title">ZeeXClub</h3>
                <p>Votre plateforme de streaming préférée. Films et séries en HD.</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-discord"></i></a>
                </div>
            </div>
            <div class="footer-section">
                <h4>Navigation</h4>
                <ul>
                    <li><a href="index.html">Accueil</a></li>
                    <li><a href="catalog.html">Catalogue</a></li>
                    <li><a href="catalog.html?type=movie">Films</a></li>
                    <li><a href="catalog.html?type=series">Séries</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Mon compte</h4>
                <ul>
                    <li><a href="profile.html">Profil</a></li>
                    <li><a href="mylist.html">Ma Liste</a></li>
                    <li><a href="#">Paramètres</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Légal</h4>
                <ul>
                    <li><a href="#">Mentions légales</a></li>
                    <li><a href="#">Confidentialité</a></li>
                    <li><a href="#">CGU</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 ZeeXClub. Tous droits réservés.</p>
        </div>
    </footer>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
    </div>

    <!-- Scripts -->
    <script type="module" src="js/config.js"></script>
    <script type="module" src="js/api.js"></script>
    <script type="module">
        import api from './js/api.js';
        
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // Charger les tendances
                const response = await api.getTrending('all', 'week');
                const shows = response.data || [];
                
                // Top 10
                const topTenGrid = document.getElementById('topTenGrid');
                if (topTenGrid && shows.length > 0) {
                    topTenGrid.innerHTML = shows.slice(0, 10).map((show, idx) => `
                        <div class="movie-card" style="position: relative;" onclick="window.location.href='details.html?id=${show.id}'">
                            <div style="position: absolute; top: -10px; left: -10px; font-size: 4rem; font-weight: 800; color: rgba(255,255,255,0.2); font-style: italic; z-index: 1;">
                                ${idx + 1}
                            </div>
                            <img src="${api.getImageUrl(show.poster_path, 'w500')}" 
                                 alt="${show.title}" 
                                 class="movie-poster" 
                                 style="position: relative; z-index: 2;">
                            <div class="movie-info">
                                <h3 class="movie-title">${show.title}</h3>
                                <div class="movie-meta">
                                    <span class="movie-rating"><i class="fas fa-star"></i> ${show.rating?.toFixed(1) || 'N/A'}</span>
                                </div>
                            </div>
                        </div>
                    `).join('');
                }
                
                // Toutes les tendances
                const trendingGrid = document.getElementById('trendingGrid');
                if (trendingGrid) {
                    trendingGrid.innerHTML = shows.map(show => `
                        <div class="movie-card" onclick="window.location.href='details.html?id=${show.id}'">
                            <img src="${api.getImageUrl(show.poster_path, 'w500')}" 
                                 alt="${show.title}" 
                                 class="movie-poster"
                                 loading="lazy">
                            <div class="movie-info">
                                <h3 class="movie-title">${show.title}</h3>
                                <div class="movie-meta">
                                    <span>${show.type === 'movie' ? 'Film' : 'Série'}</span>
                                    ${show.rating ? `<span class="movie-rating"><i class="fas fa-star"></i> ${show.rating.toFixed(1)}</span>` : ''}
                                </div>
                            </div>
                        </div>
                    `).join('');
                }
                
            } catch (error) {
                console.error('Erreur chargement tendances:', error);
            }
        });
    </script>
</body>
</html>
